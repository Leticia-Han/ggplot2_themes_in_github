---
output: github_document
---

```{r echo=FALSE, include=FALSE}
library(tidyverse)
library(gh)
library(lubridate)
library(knitr)

# get all repos that mention "ggplot2" and "theme"
res1 <- gh("GET /search/repositories?q=ggplot2+theme")
total_repos1 <- res1$total_count
pages <- ceiling(total_repos1 / 30)

res_items <- c(res1$items)

for (i in 2:pages) {
  res1 <- gh("GET /search/repositories?q=ggplot2+theme",
             page = i)
  res_items <- c(res_items, res1$items)
}

res2 <- gh("GET /search/repositories?q=ggplot2+style")
total_repos2 <- res2$total_count
pages <- ceiling(total_repos2 / 30)

res_items <- c(res_items, res2$items)

for (i in 2:pages) {
  res2 <- gh("GET /search/repositories?q=ggplot2+style", 
             page = i)
  res_items <- c(res_items, res2$items)
}

fix_null <- function(x) {
  ifelse(is_null(x), "", x)
}

github_ggplot2_themes <- tibble(
  name = character(),
  repo_url = character(),
  description = character(),
  homepage = character(),
  license = character(),
  created = character(),
  updated = character()
)

# list of the repos to filter off
repos_no_themes <- c(
  "jmcastagnetto/ggplot2_themes_in_github",
  "dannguyen/matplotlib-styling-tutorial",
  "davidhuh/plot_templates",
  "jkeirstead/r-slopegraph",
  "ArtPoon/ggfree",
  "foxnic/US-Mass-Shootings-Analysis",
  "guiastrennec/ggplus",
  "threecifanggen/ggplotly",
  "edawson/tidysig",
  "elabuel-o/xkcd-graphics",
  "pobch/ggplot2_practicing",
  "rensa/ggclump",
  "eclarke/ggbeeswarm",
  "GeekOnAcid/geom_rug2",
  "cemalley/data-viz",
  "onlyphantom/rgraphics",
  "sethbilliau/HODP-styleguide"
)

for (item in res_items) {
  # filter off repos w/o themes/styles
  if (item$full_name %in% repos_no_themes) {
    next
  }
  github_ggplot2_themes <- bind_rows(
    github_ggplot2_themes,
    tibble(
      name = item$name,
      repo_url = item$html_url,
      description = fix_null(item$description),
      homepage = fix_null(item$homepage),
      license = fix_null(item$license$name),
      created = item$created_at,
      updated = item$updated_at,
    )
  )
}
github_ggplot2_themes <- github_ggplot2_themes %>% 
  distinct() %>% 
  arrange(name, created)
last_generated <- now(tzone = "UTC")
# save csv
write_csv(
  github_ggplot2_themes,
  path = "ggplot2_themes_in_github.csv"
)
```

# List of github repos with (possible) ggplot2 themes

**Last generated on** `r last_generated` (UTC)


```{r echo=FALSE, results}
kable(github_ggplot2_themes %>% 
  rownames_to_column("item"),
      format = "markdown"
      )
```

*License*: MIT
